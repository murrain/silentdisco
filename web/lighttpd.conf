server.document-root = "/srv/http"
server.port = 80

server.modules = (
  "mod_access",
  "mod_accesslog",
  "mod_alias",
  "mod_redirect",
  "mod_setenv",
  "mod_rewrite"
)

index-file.names = ( "index.html", "index.htm" )

mimetype.assign = (
  ".html" => "text/html",
  ".htm"  => "text/html",
  ".css"  => "text/css",
  ".js"   => "application/javascript",
  ".png"  => "image/png",
  ".jpg"  => "image/jpeg",
  ".jpeg" => "image/jpeg",
  ".svg"  => "image/svg+xml",
  ".m3u"  => "audio/x-mpegurl",
  ".xspf" => "application/xspf+xml"
)

accesslog.filename = "/var/log/lighttpd/access.log"

$HTTP["useragent"] =~ "(VLC|mpv|Kodi|MXPlayer|nPlayer|OPlayer|Infuse|BSPlayer)" {
  url.rewrite-once = ( "^/$" => "/dj.dance/stream.m3u" )
  index-file.names = ( "stream.m3u" )
}

alias.url = ( "/dj.dance/" => "/srv/http/dj.dance/" )
